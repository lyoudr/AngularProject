(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"Fxy/":function(l,n,t){"use strict";t.r(n);var e=t("CcnG"),o=function(){return function(){}}(),u=t("pMnS"),r=function(){return function(l){this.viewContainerRef=l}}(),i=t("qAlS"),c=t("Fzqc"),a=t("dWZg"),s=e["\u0275crt"]({encapsulation:2,styles:["cdk-virtual-scroll-viewport{display:block;position:relative;overflow:auto;contain:strict;transform:translateZ(0);will-change:scroll-position;-webkit-overflow-scrolling:touch}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:0}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:0}.cdk-virtual-scroll-spacer{position:absolute;top:0;left:0;height:1px;width:1px;transform-origin:0 0}[dir=rtl] .cdk-virtual-scroll-spacer{right:0;left:auto;transform-origin:100% 0}"],data:{}});function d(l){return e["\u0275vid"](2,[e["\u0275qud"](402653184,1,{_contentWrapper:0}),(l()(),e["\u0275eld"](1,0,[[1,0],["contentWrapper",1]],null,1,"div",[["class","cdk-virtual-scroll-content-wrapper"]],null,null,null,null,null)),e["\u0275ncd"](null,0),(l()(),e["\u0275eld"](3,0,null,null,0,"div",[["class","cdk-virtual-scroll-spacer"]],[[4,"transform",null]],null,null,null,null))],null,function(l,n){l(n,3,0,n.component._totalContentSizeTransform)})}var p=t("mrSG"),f=t("XXB/"),v=t("YlbQ"),g=t("26FU"),m=t("pugT"),h=function(){return function(l){this.restaurantService=l,this.ds=new k(this.restaurantService)}}(),k=function(l){function n(n){var t=l.call(this)||this;return t.restaurantService=n,t.pageSize=1e4,t.initialData=[{o_tlc_agency_address:"\u81fa\u5317\u5e02\u5167\u6e56\u5340\u6587\u6e56\u885715\u865f",o_tlc_agency_admincategory:"",o_tlc_agency_category:"1",o_tlc_agency_categorychild:"\u5c0f\u5b78",o_tlc_agency_email:"",o_tlc_agency_fax:"(02)2799-4445",o_tlc_agency_img_front:"",o_tlc_agency_img_inner:"",o_tlc_agency_link:"http://www.whups.tp.edu.tw",o_tlc_agency_name:"\u81fa\u5317\u5e02\u5167\u6e56\u5340\u6587\u6e56\u570b\u6c11\u5c0f\u5b78",o_tlc_agency_opentime:"",o_tlc_agency_phone:"(02)2658-3515",o_tlc_agency_purpose:"",o_tlc_agency_region:"8",o_tlc_agency_service:"",_id:100}],t.fetchedPages=new Set,t.dataStream=new g.a(t.initialData),t.subscription=new m.a,t}return p.__extends(n,l),n.prototype.connect=function(l){var n=this;return this.subscription.add(l.viewChange.subscribe(function(l){console.log(l.start),console.log(l.end);for(var t=n.getPageForIndex(l.start),e=n.getPageForIndex(l.end-1),o=t;o<=e;o++)n.fetchPage(o)})),this.dataStream},n.prototype.disconnect=function(){this.subscription.unsubscribe()},n.prototype.getPageForIndex=function(l){return Math.floor(l/this.pageSize)},n.prototype.fetchPage=function(l){var n=this;this.fetchedPages.has(l)||(this.fetchedPages.add(l),this.restaurantService.GetBigData().subscribe(function(l){console.log("data.result.results is =>",l.result.results),n.dataStream.next(l.result.results)}))},n}(v.b),b=e["\u0275crt"]({encapsulation:0,styles:[".example-viewport[_ngcontent-%COMP%] { height: 200px; width: 50%;border: 1px solid black;} .example-item[_ngcontent-%COMP%] {height: 50px;}"],data:{}});function w(l){return e["\u0275vid"](0,[(l()(),e["\u0275eld"](0,0,null,null,1,"div",[["class","example-item"]],null,null,null,null,null)),(l()(),e["\u0275ted"](1,null,[" "," "]))],null,function(l,n){l(n,1,0,n.context.$implicit.SBMNAME||"Loading...")})}function y(l){return e["\u0275vid"](2,[(l()(),e["\u0275eld"](0,0,null,null,6,"cdk-virtual-scroll-viewport",[["class","example-viewport cdk-virtual-scroll-viewport"],["itemSize","50"]],[[2,"cdk-virtual-scroll-orientation-horizontal",null],[2,"cdk-virtual-scroll-orientation-vertical",null]],null,null,d,s)),e["\u0275prd"](6144,null,i.b,null,[i.d]),e["\u0275did"](2,540672,null,0,i.a,[],{itemSize:[0,"itemSize"]},null),e["\u0275prd"](1024,null,i.i,i.k,[i.a]),e["\u0275did"](4,245760,null,0,i.d,[e.ElementRef,e.ChangeDetectorRef,e.NgZone,[2,i.i],[2,c.b],i.f],null,null),(l()(),e["\u0275and"](16777216,null,0,1,null,w)),e["\u0275did"](6,409600,null,0,i.c,[e.ViewContainerRef,e.TemplateRef,e.IterableDiffers,[1,i.d],e.NgZone],{cdkVirtualForOf:[0,"cdkVirtualForOf"],cdkVirtualForTemplateCacheSize:[1,"cdkVirtualForTemplateCacheSize"]},null)],function(l,n){var t=n.component;l(n,2,0,"50"),l(n,4,0),l(n,6,0,t.ds,0)},function(l,n){l(n,0,0,"horizontal"===e["\u0275nov"](n,4).orientation,"horizontal"!==e["\u0275nov"](n,4).orientation)})}var _=t("K9Ia"),C=function(){function l(){this.TextAreaMessage=[],this.isClose=new _.a}return l.prototype.ngOnInit=function(){this.socket=new WebSocket("ws://127.0.0.1:8080","echo-protocol"),this.socket.onopen=function(){console.log("connect to websocket")},this.socket.onerror=function(l){console.log("WebSocket error : "+l)},this.chatstyle={height:"50%",overflow:"scroll"}},l.prototype.ConnectWebSocket=function(l,n){var t=this;console.log("Inserted data is =>",l),this.name=n,this.socket.send(JSON.stringify({name:n,message:l})),this.socket.onerror=function(l){console.log("WebSocket error : "+l)},this.socket.onmessage=function(l){console.log("Received data from server is =>",l.data);var n=JSON.parse(l.data);n.name!==t.name?t.self=!1:n.name===t.name&&(t.self=!0),t.TextAreaMessage.push({Name:n.name,Message:n.message})}},l.prototype.close=function(){this.isClose.next(!0)},l}(),x=function(){return function(l){this.component=l}}(),S=function(){function l(){}return l.prototype.getAds=function(){return[new x(C)]},l}(),F=function(){function l(l,n){this.componentFactoryResolver=l,this.adService=n,this.currentAdIndex=-1}return l.prototype.ngOnInit=function(){this.ads=this.adService.getAds()},l.prototype.loadComponent=function(l){switch(l){case"chat":this.currentAdIndex=0}var n=this.componentFactoryResolver.resolveComponentFactory(this.ads[this.currentAdIndex].component),t=this.adHost.viewContainerRef;t.clear(),t.createComponent(n).instance.isClose.subscribe(function(l){switch(console.log("result is =>",l),l){case!0:t.clear()}})},l}(),R=e["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function z(l){return e["\u0275vid"](0,[(l()(),e["\u0275and"](0,null,null,0))],null,null)}function V(l){return e["\u0275vid"](0,[e["\u0275qud"](402653184,1,{adHost:0}),(l()(),e["\u0275eld"](1,0,null,null,7,"div",[["class","row justify-content-end"]],null,null,null,null,null)),(l()(),e["\u0275eld"](2,0,null,null,6,"div",[["aria-label","Basic example"],["class","btn-group"],["role","group"]],null,null,null,null,null)),(l()(),e["\u0275eld"](3,0,null,null,1,"button",[["class","btn btn-secondary"],["type","button"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.loadComponent("chat")&&e),e},null,null)),(l()(),e["\u0275ted"](-1,null,[" Chat Area "])),(l()(),e["\u0275eld"](5,0,null,null,1,"button",[["class","btn btn-secondary"],["type","button"]],null,null,null,null,null)),(l()(),e["\u0275ted"](-1,null,["Middle"])),(l()(),e["\u0275eld"](7,0,null,null,1,"button",[["class","btn btn-secondary"],["type","button"]],null,null,null,null,null)),(l()(),e["\u0275ted"](-1,null,["Right"])),(l()(),e["\u0275and"](16777216,null,null,1,null,z)),e["\u0275did"](10,16384,[[1,4]],0,r,[e.ViewContainerRef],null,null),(l()(),e["\u0275eld"](11,0,null,null,1,"app-cdkvirtualscroll",[],null,null,null,y,b)),e["\u0275did"](12,49152,null,0,h,[f.a],null,null)],null,null)}function I(l){return e["\u0275vid"](0,[(l()(),e["\u0275eld"](0,0,null,null,1,"app-big-data",[],null,null,null,V,R)),e["\u0275did"](1,114688,null,0,F,[e.ComponentFactoryResolver,S],null,null)],function(l,n){l(n,1,0)},null)}var M=e["\u0275ccf"]("app-big-data",F,I,{},{},[]),A=t("Ip0R"),N=e["\u0275crt"]({encapsulation:2,styles:[],data:{}});function O(l){return e["\u0275vid"](0,[(l()(),e["\u0275eld"](0,0,null,null,1,"div",[],[[4,"margin-left",null]],null,null,null,null)),(l()(),e["\u0275ted"](1,null,[" ",": "," "]))],null,function(l,n){l(n,0,0,n.component.self?"150px":"0px"),l(n,1,0,n.context.$implicit.Name,n.context.$implicit.Message)})}function P(l){return e["\u0275vid"](0,[(l()(),e["\u0275eld"](0,0,null,null,22,"div",[["class","container"]],null,null,null,null,null)),(l()(),e["\u0275eld"](1,0,null,null,5,"div",[["class","row justify-content-center mt-5"]],null,null,null,null,null)),(l()(),e["\u0275eld"](2,0,null,null,1,"h5",[["class","ml-5 mb-4"]],null,null,null,null,null)),(l()(),e["\u0275ted"](-1,null,["Chat Room "])),(l()(),e["\u0275eld"](4,0,null,null,2,"div",[["class","col-12 col-md-8"]],[[8,"style",2]],null,null,null,null)),(l()(),e["\u0275and"](16777216,null,null,1,null,O)),e["\u0275did"](6,278528,null,0,A.j,[e.ViewContainerRef,e.TemplateRef,e.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(l()(),e["\u0275eld"](7,0,null,null,15,"div",[["class","row justify-content-center"]],null,null,null,null,null)),(l()(),e["\u0275eld"](8,0,null,null,14,"div",[["class","col-12 col-md-8"]],null,null,null,null,null)),(l()(),e["\u0275eld"](9,0,null,null,4,"div",[["class","input-group mb-3"]],null,null,null,null,null)),(l()(),e["\u0275eld"](10,0,null,null,2,"div",[["class","input-group-prepend"]],null,null,null,null,null)),(l()(),e["\u0275eld"](11,0,null,null,1,"span",[["class","input-group-text"]],null,null,null,null,null)),(l()(),e["\u0275ted"](-1,null,["Name "])),(l()(),e["\u0275eld"](13,0,[["Name",1]],null,0,"input",[["class","form-control"],["type","text"]],null,null,null,null,null)),(l()(),e["\u0275eld"](14,0,null,null,4,"div",[["class","input-group mb-3"]],null,null,null,null,null)),(l()(),e["\u0275eld"](15,0,null,null,2,"div",[["class","input-group-prepend"]],null,null,null,null,null)),(l()(),e["\u0275eld"](16,0,null,null,1,"span",[["class","input-group-text"]],null,null,null,null,null)),(l()(),e["\u0275ted"](-1,null,["Chat "])),(l()(),e["\u0275eld"](18,0,[["Chat",1]],null,0,"input",[["class","form-control"],["type","text"]],null,null,null,null,null)),(l()(),e["\u0275eld"](19,0,null,null,1,"button",[["class","btn btn-dark mt-3 ml-5"],["id","btn"],["type","button"]],null,[[null,"click"]],function(l,n,t){var o=!0;return"click"===n&&(o=!1!==l.component.ConnectWebSocket(e["\u0275nov"](l,18).value,e["\u0275nov"](l,13).value)&&o),o},null,null)),(l()(),e["\u0275ted"](-1,null,["Send"])),(l()(),e["\u0275eld"](21,0,null,null,1,"button",[["class","btn btn-dark mt-3 ml-5"],["type","button"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.close()&&e),e},null,null)),(l()(),e["\u0275ted"](-1,null,["X"]))],function(l,n){l(n,6,0,n.component.TextAreaMessage)},function(l,n){l(n,4,0,n.component.chatstyle)})}function D(l){return e["\u0275vid"](0,[(l()(),e["\u0275eld"](0,0,null,null,1,"app-chat",[],null,null,null,P,N)),e["\u0275did"](1,114688,null,0,C,[],null,null)],function(l,n){l(n,1,0)},null)}var T=e["\u0275ccf"]("app-chat",C,D,{isClose:"isClose"},{},[]),W=t("ZYCi"),B={title:"BigData"},j=function(){return function(){}}();t.d(n,"BigDataModuleNgFactory",function(){return Z});var Z=e["\u0275cmf"](o,[],function(l){return e["\u0275mod"]([e["\u0275mpd"](512,e.ComponentFactoryResolver,e["\u0275CodegenComponentFactoryResolver"],[[8,[u.a,M,T]],[3,e.ComponentFactoryResolver],e.NgModuleRef]),e["\u0275mpd"](4608,A.m,A.l,[e.LOCALE_ID,[2,A.A]]),e["\u0275mpd"](4608,S,S,[]),e["\u0275mpd"](1073742336,A.c,A.c,[]),e["\u0275mpd"](1073742336,c.a,c.a,[]),e["\u0275mpd"](1073742336,a.b,a.b,[]),e["\u0275mpd"](1073742336,i.g,i.g,[]),e["\u0275mpd"](1073742336,i.e,i.e,[]),e["\u0275mpd"](1073742336,W.p,W.p,[[2,W.v],[2,W.l]]),e["\u0275mpd"](1073742336,j,j,[]),e["\u0275mpd"](1073742336,o,o,[]),e["\u0275mpd"](1024,W.j,function(){return[[{path:"",component:F,data:B}]]},[])])})}}]);